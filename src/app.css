@import "tailwindcss";
@plugin "@tailwindcss/typography";
@import "@fontsource/inter/400.css";
@import "@fontsource/inter/500.css";
@import "@fontsource/inter/600.css";
@import "@fontsource/inter/700.css";

@custom-variant dark (&:where(.dark, .dark *));

:root {
  /* Light mode colors */
  --text-primary: #111826; /* gray-900 */
  --text-secondary: #1f2937; /* gray-800 */
  --text-muted: #6b7280; /* gray-500 */
  --text-subtle: #9ca3af; /* gray-400 */

  --link-primary: #2563eb; /* blue-600 */
  --link-secondary: #3b82f6; /* blue-500 */
  --link-hover: #1d4ed8; /* blue-700 */
  --link-strong: #1e40af; /* blue-800 */

  --bg-primary: #ffffff; /* white */
  --bg-secondary: #f9fafb; /* gray-50 */
  --bg-muted: #f3f4f6; /* gray-100 */
  --bg-dark: #111827; /* gray-900 */
  --bg-code: #1f2937; /* gray-800 - darker than white for code blocks */
  --bg-code-header: #374151; /* gray-700 */
  --bg-accent: #eff6ff; /* blue-50 */

  --border-primary: #e5e7eb; /* gray-200 */
  --border-light: #f3f4f6; /* gray-100 */
  --border-secondary: #d1d5db; /* gray-300 */
  --border-accent: #93c5fd; /* blue-300 */

  --nav-text: #4b5563; /* gray-600 */
  --nav-hover: #111827; /* gray-900 */
  --nav-title: #111827; /* gray-900 */
  --nav-title-hover: #374151; /* gray-700 */

  --tag-bg: #eff6ff; /* blue-50 */
  --tag-text: #1d4ed8; /* blue-700 */

  --button-primary: #4b5563; /* gray-600 */
  --button-primary-dark: #374151; /* gray-700 */

  --notice-info: #0284c7; /* sky-600 */
  --notice-success: #059669; /* emerald-600 */
  --notice-error: #dc2626; /* red-600 */

  --success: #10b981; /* emerald-500 */
  --info: #0891b2; /* cyan-600 */
}

.dark {
  /* Dark mode colors */
  --text-primary: #f3f4f6; /* gray-100 */
  --text-secondary: #e5e7eb; /* gray-200 */
  --text-muted: #9ca3af; /* gray-400 */
  --text-subtle: #6b7280; /* gray-500 */

  --link-primary: #fb923c; /* orange-400 */
  --link-secondary: #f97316; /* orange-500 */
  --link-hover: #fdba74; /* orange-300 */
  --link-strong: #fb923c; /* orange-400 */

  --bg-primary: #0a0a0a; /* near black */
  --bg-secondary: #141414; /* very dark gray */
  --bg-muted: #262626; /* dark gray */
  --bg-dark: #000000; /* pure black */
  --bg-code: #1a1a1a; /* dark gray - lighter than primary for code blocks */
  --bg-code-header: #525252; /* neutral medium gray */
  --bg-accent: #1e3a8a; /* blue-900 */

  --border-primary: #404040; /* neutral gray */
  --border-light: #525252; /* neutral medium gray */
  --border-secondary: #525252; /* neutral medium gray */
  --border-accent: #f97316; /* orange-500 */

  --nav-text: #9ca3af; /* gray-400 */
  --nav-hover: #f3f4f6; /* gray-100 */
  --nav-title: #f3f4f6; /* gray-100 */
  --nav-title-hover: #d1d5db; /* gray-300 */

  --tag-bg: #78350f; /* amber-900 */
  --tag-text: #fbbf24; /* amber-400 */

  --button-primary: #6b7280; /* gray-500 */
  --button-primary-dark: #4b5563; /* gray-600 */

  --notice-info: #38bdf8; /* sky-400 */
  --notice-success: #34d399; /* emerald-400 */
  --notice-error: #fb7185; /* rose-400 */

  --success: #34d399; /* emerald-400 */
  --info: #22d3ee; /* cyan-400 */
}

@theme inline {
  /* Font families */
  --font-sans:
    "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  /* Colors - referencing CSS variables */
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  --color-text-subtle: var(--text-subtle);

  --color-link-primary: var(--link-primary);
  --color-link-secondary: var(--link-secondary);
  --color-link-hover: var(--link-hover);
  --color-link-strong: var(--link-strong);

  --color-bg-primary: var(--bg-primary);
  --color-bg-secondary: var(--bg-secondary);
  --color-bg-muted: var(--bg-muted);
  --color-bg-dark: var(--bg-dark);
  --color-bg-code: var(--bg-code);
  --color-bg-code-header: var(--bg-code-header);
  --color-bg-accent: var(--bg-accent);

  --color-border-primary: var(--border-primary);
  --color-border-light: var(--border-light);
  --color-border-secondary: var(--border-secondary);
  --color-border-accent: var(--border-accent);

  --color-nav-text: var(--nav-text);
  --color-nav-hover: var(--nav-hover);
  --color-nav-title: var(--nav-title);
  --color-nav-title-hover: var(--nav-title-hover);

  --color-tag-bg: var(--tag-bg);
  --color-tag-text: var(--tag-text);

  --color-button-primary: var(--button-primary);
  --color-button-primary-dark: var(--button-primary-dark);

  --color-notice-info: var(--notice-info);
  --color-notice-success: var(--notice-success);
  --color-notice-error: var(--notice-error);

  --color-success: var(--success);
  --color-info: var(--info);
}

/* Code title styling (rehype-pretty-code) */
[data-rehype-pretty-code-title] {
  background: var(--tw-prose-pre-bg);
  color: var(--tw-prose-captions);
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: bold;
  font-family:
    ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo,
    monospace;
  border-top-left-radius: 0.5rem;
  border-top-right-radius: 0.5rem;
  margin-bottom: 0;
}

[data-rehype-pretty-code-title] + pre {
  margin-top: 0;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

code[data-line-numbers] {
  counter-reset: line;
}

code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);

  /* Other styling */
  display: inline-block;
  width: 0.75rem;
  margin-right: 2rem;
  text-align: right;
  color: var(--color-text-muted);
}

code[data-line-numbers-max-digits="2"] > [data-line]::before {
  width: 1.25rem;
}

code[data-line-numbers-max-digits="3"] > [data-line]::before {
  width: 1.75rem;
}

code[data-line-numbers-max-digits="4"] > [data-line]::before {
  width: 2.25rem;
}
